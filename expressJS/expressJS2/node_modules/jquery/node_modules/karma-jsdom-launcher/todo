# TODO

[ ] Answer https://github.com/badeball/karma-jsdom-launcher/issues/27

    I couldn't let this one go and did some more digging. It turns out that the synchronous requests are made by [source-map-support](https://github.com/evanw/node-source-map-support).

    There's an issue in angular-cli that prevents me from disabling it, which I've tried to outline below.

    1. Even though I specify `"sourceMap": true` in `angular.json`

    2. Config is [normalized](https://github.com/angular/angular-cli/blob/v7.2.3/packages/angular_devkit/build_angular/src/karma/index.ts#L42-L46)

    3. `sourceMap` option is [further normalized](https://github.com/angular/angular-cli/blob/v7.2.3/packages/angular_devkit/build_angular/src/utils/normalize-builder-schema.ts#L59)

    4. Normalization of `sourceMap` always ends up with [an object](https://github.com/angular/angular-cli/blob/v7.2.3/packages/angular_devkit/build_angular/src/utils/normalize-source-maps.ts#L17-L22)

    5. `source-map-support` is [conditionally included](https://github.com/angular/angular-cli/blob/v7.2.3/packages/angular_devkit/build_angular/src/angular-cli-files/plugins/karma.ts#L80-L93), but the condition is always true

    I suspect that https://github.com/angular/angular-cli/pull/13062 introduced this behavior.

    The good news is that `source-map-support` will ignore any errors thrown by XMLHttpRequest. 

[ ] Call window.close() after end test
